 TODO
  
 - sane logging
 - uniform security exception (for write checking and resource URIs)
 - allow for locking check (not part of Resource?)
 
 - better management of obfuscator seeds 
 - rethink permission implications: deny/obfuscate R -> deny W, allow W -> allow R ? ---> validator?
 
 - reuse resources.mapped for resourceRoot rule?
 
 - more efficient isContainment in authorization queries (goldContainmentReference)
 - more efficient hiddenAttribute in authorization queries (eClass-eAttribute matching)
 - more efficient arbiter data structures
 - more efficient arbiter role filtering (Set<User> + query for group)
 - use EVM Context & do code cosmetics on rule specification / etc 
 
 - address ecore-specific EGenericType infinite loop (see Appendix 1)
 
 - multiple policy conflict resolution strategies?
 - user equivalence classes based on read permissions
 - ordered collections
 - binding user or object values?
 - support cross-resource containment?
 
 DONE
 - default should be ::PERMIT if there are no rules?
 - better unique IDs for Ecore models 
 - deal with unrooted elements
 - 'cheap move' feature in model indexers
 - implement manipulators
 - add further triple rules
 - correspondence needs cleanup?
 - address ecore-specific EFactory issue
 - test putback
 - fix container edge change
 - rethink case where malicious user changes object class (while keeping the ID)
 - reuse per-asset permission queries?
 - rethink permission implications: first_applicable: default is allow
 - rethink permission implications: read edge needs read src/trg, write edge needs write src/read trg (write trg if containment or has an eOpposite), read/write attribute needs read/write src?
 - rethink permission implications: unrooted elements are discarded
 - rethink permission implications: eObject unreadable --> contained elements unreadable
 - add obfuscation

  
 APPENDIX 1 
 *** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.add.lhs>{"goldSrc"=hgjhgj, "frontSrc"=org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true), "goldTrg"=B, "frontTrg"=B, "eReference"=eType}
		  FRONT$EObject.reference		++ T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);) --> T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);)
*** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.remove.lhs>{"frontSrc"=org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true), "eReference"=eGenericType, "frontTrg"=org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: B)}
		  FRONT$EObject.reference		-- T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@de63949 (name: eGenericType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: true, resolveProxies: false);org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: B);) --> T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@de63949 (name: eGenericType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: true, resolveProxies: false);org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: B);)
*** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.remove.lhs>{"frontSrc"=org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: B), "eReference"=eClassifier, "frontTrg"=B}
		  FRONT$EObject.reference		-- T(org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: B);org.eclipse.emf.ecore.impl.EReferenceImpl@442310fd (name: eClassifier) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);) --> T(org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: ?);org.eclipse.emf.ecore.impl.EReferenceImpl@442310fd (name: eClassifier) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);)
*** executing objects on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.objects.get.remove.lhs>{"frontEObject"=org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: ?), "eClass"=EGenericType}
		            FRONT$EObject		-- T(org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: ?);org.eclipse.emf.ecore.impl.EClassImpl@6a5c2d2d (name: EGenericType) (instanceClassName: null) (abstract: false, interface: false);) --> T(org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: ?);org.eclipse.emf.ecore.impl.EClassImpl@6a5c2d2d (name: EGenericType) (instanceClassName: null) (abstract: false, interface: false);)
		       Correspond$EOBJECT		-- T(null;org.eclipse.emf.ecore.impl.EGenericTypeImpl@3c31492b (expression: ?);) --> null
*** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.add.lhs>{"goldSrc"=hgjhgj, "frontSrc"=org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true), "goldTrg"=B, "frontTrg"=B, "eReference"=eType}
		  FRONT$EObject.reference		++ T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);) --> T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);)
*** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.remove.lhs>{"frontSrc"=org.eclipse.emf.ecore.impl.EGenericTypeImpl@2af77f9e (expression: B), "eReference"=eClassifier, "frontTrg"=B}
		  FRONT$EObject.reference		-- T(org.eclipse.emf.ecore.impl.EGenericTypeImpl@2af77f9e (expression: B);org.eclipse.emf.ecore.impl.EReferenceImpl@442310fd (name: eClassifier) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);) --> T(org.eclipse.emf.ecore.impl.EGenericTypeImpl@2af77f9e (expression: ?);org.eclipse.emf.ecore.impl.EReferenceImpl@442310fd (name: eClassifier) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);)
*** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.remove.lhs>{"frontSrc"=org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true), "eReference"=eType, "frontTrg"=EJavaObject}
		  FRONT$EObject.reference		-- T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EDataTypeImpl@619e0b94 (name: EJavaObject) (instanceClassName: java.lang.Object) (serializable: true);) --> T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EDataTypeImpl@619e0b94 (name: EJavaObject) (instanceClassName: java.lang.Object) (serializable: true);)
*** executing references on Match<org.mondo.collaboration.security.lens.bx.RelationalLensXform.{user='bob'}.references.get.add.lhs>{"goldSrc"=hgjhgj, "frontSrc"=org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true), "goldTrg"=B, "frontTrg"=B, "eReference"=eType}
		  FRONT$EObject.reference		++ T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);) --> T(org.eclipse.emf.ecore.impl.EReferenceImpl@4021393f (name: null) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: false, transient: false, defaultValueLiteral: null, unsettable: false, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EReferenceImpl@62f7d7bd (name: eType) (ordered: true, unique: true, lowerBound: 0, upperBound: 1) (changeable: true, volatile: true, transient: false, defaultValueLiteral: null, unsettable: true, derived: false) (containment: false, resolveProxies: true);org.eclipse.emf.ecore.impl.EClassImpl@58d15e7c (name: B) (instanceClassName: null) (abstract: false, interface: false);)
 